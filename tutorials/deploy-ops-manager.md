---
title: MongoDBOpsManager Resource
description: This tutorial explains how to create the Ops Manager Custom Resource in Kubernetes.
---
### Create Admin Credentials Secret
Before creating the Ops Manager resource you need to prepare the information about the admin user which will be created automatically in Ops Manager. Execute below command to do it:

```execute
kubectl create secret generic ops-manager-admin-secret  --from-literal=Username="jane.doe@example.com" --from-literal=Password="Passw0rd."  --from-literal=FirstName="Jane" --from-literal=LastName="Doe" -n mongodb
```

Note, that the secret is needed only during the initialization of the Ops Manager object - you can remove it or change the password using Ops Manager UI after the Ops Manager object was created

You will see output similar below:

```
secret/ops-manager-admin-secret created
```

### Create MongoDBOpsManager Resource



```execute
cat <<'EOF' >ops-manager.yaml
apiVersion: mongodb.com/v1
kind: MongoDBOpsManager
metadata:
  name: ops-manager
spec:
  # the number of Ops Manager instances to run. Set to value bigger
  # than 1 to get high availability and upgrades without downtime
  replicas: 3

  # the version of Ops Manager distro to use
  version: 4.4.4

  # optional. Specify the custom cluster domain of the Kubernetes cluster if it's different from the default one ('cluster.local').
  # This affects the urls generated by the Operator.
  # This field is also used for Application Database url
  # clusterDomain: mycompany.net

  # the name of the secret containing admin user credentials.
  # Either remove the secret or change the password using Ops Manager UI after the Ops Manager
  # resource is created!
  adminCredentials: ops-manager-admin-secret

  # optional. The Ops Manager configuration. All the values must be of type string
  configuration:
    mms.fromEmailAddr: "admin@thecompany.com"

  # the application database backing Ops Manager. Replica Set is the only supported type
  # Application database has the SCRAM-SHA authentication mode always enabled
  applicationDatabase:
    members: 3
    # optional. Configures the version of MongoDB used as an application database.
    # The bundled MongoDB binary will be used if omitted and no download from the Internet will happen
    version: 4.2.6-ent
    persistent: true
    # optional. Allows to pass custom MongoDB process configuration
    additionalMongodConfig:
      operationProfiling:
        mode: slowOp
    podSpec:
      cpu: '0.25'
EOF
```
Execute below command to create the object in Kubernetes:

```execute
kubectl apply -f ops-manager.yaml -n mongodb
```

You will see output similar below:

```
mongodbopsmanager.mongodb.com/ops-manager created
```
Note, that it takes up to 8 minutes to initialize the Application Database and start Ops Manager.

### Confirm that the Ops Manager resource is running

```execute
kubectl get om -o yaml -n mongodb | grep -i status -A 6
```

You will see output similar below:

```
  status:
    applicationDatabase:
      lastTransition: "2020-12-23T14:49:49Z"
      message: Application Database Agents haven't reached Running state yet
      observedGeneration: 1
      phase: Pending
      version: ""
```

